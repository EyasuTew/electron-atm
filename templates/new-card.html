<link rel="stylesheet" href="../vendor/bootstrap-3.3.7.css"> 
<link rel="stylesheet" href="../css/styles.css">

<script>window.$ = window.jQuery = require('../vendor/jquery-3.1.1.js');</script>
<script src="../vendor/bootstrap.min.js"></script>


<div id="container" class="container-fluid">
  <form id="add-new-card-form" class="navbar-form navbar-center">
    <div class="row">
      <div class="col-xs-3"></div>        
      <div class="col-xs-6">
        <label for="cardnumber" class="control-label">Card Number</label>
        <input type="text" class="form-control" id="cardnumber" value="" placeholder="Card Number" maxlength="22" required></input>
        <span class="help-block"></span>
      </div>
      <div class="col-xs-3"></div>        
    </div>

    <div class="row">      
      <div class="col-xs-2">
        <label for="expiry-date" class="control-label">Expiry Date</label>
        <input type="text" class="form-control buffer-6" id="expiry-date" value="" placeholder="YYMM" maxlength="4"></input>
        <span class="help-block"></span>
      </div>

      <div class="col-xs-2">
        <label for="service-code" class="control-label">Service Code</label>
        <input type="text" class="form-control buffer-6" id="service-code" value="" placeholder="101" maxlength="3"></input>
        <span class="help-block"></span>
      </div>

      <div class="col-xs-2">
        <label for="pvk-index" class="control-label">PVK Index</label>
        <input type="text" class="form-control buffer-6" id="pvk-index" value="" placeholder="1" maxlength="1"></input>
        <span class="help-block"></span>
      </div>
      
      <div class="col-xs-2">
        <label for="pvv" class="control-label">PVV</label>
        <input type="text" class="form-control buffer-6" id="pvv" value="" placeholder="0000" maxlength="4"></input>
      </div>
      
      <div class="col-xs-2">
        <label for="cvv" class="control-label">CVV</label>
        <input type="text" class="form-control buffer-6" id="cvv" value="" placeholder="000" maxlength="3"></input>
        <span class="help-block"></span>
      </div>

      <div class="col-xs-2">
        <label for="discr-data" class="control-label">Discr Data</label>
        <input type="text" class="form-control buffer-6" id="discr-data" value="" placeholder="" maxlength="6"></input>
        <span class="help-block"></span>
      </div>     
    </div>
    
    <div class="row">
      <div class="col-xs-3"></div>        
      <div class="col-xs-6">
        <button type="submit" class="btn btn-default btn-block" id="card-added">Add</button>
      </div>
      <div class="col-xs-3"></div>        
    </div>


<!--
  <form class="container" id="needs-validation" novalidate>
  <div class="row">
    <div class="col-xs-6 mb-3">
      <label for="validationCustom01">First name</label>
      <input type="text" class="form-control" id="validationCustom01" placeholder="First name" value="Mark" required>
    </div>
    <div class="col-xs-6 mb-3">
      <label for="validationCustom02">Last name</label>
      <input type="text" class="form-control" id="validationCustom02" placeholder="Last name" value="Otto" required>
    </div>
  </div>
  <div class="row">
    <div class="col-xs-6 mb-3">
      <label for="validationCustom03">City</label>
      <input type="text" class="form-control" id="validationCustom03" placeholder="City" required>
      <div class="invalid-feedback">
        Please provide a valid city.
      </div>
    </div>
    <div class="col-xs-3 mb-3">
      <label for="validationCustom04">State</label>
      <input type="text" class="form-control" id="validationCustom04" placeholder="State" required>
      <div class="invalid-feedback">
        Please provide a valid state.
      </div>
    </div>
    <div class="col-xs-3 mb-3">
      <label for="validationCustom05">Zip</label>
      <input type="text" class="form-control" id="validationCustom05" placeholder="Zip" required>
      <div class="invalid-feedback">
        Please provide a valid zip.
      </div>
    </div>
  </div>
  <button class="btn btn-primary" type="submit">Submit form</button>
</form>
  -->


  </form>
</div>

<!-- <a id="close" href="javascript:window.close()">Close this Window</a> -->
<script>
  const electron = require('electron')
  const ipc = electron.ipcRenderer;

  $("#add-new-card-form").submit(function(e) {
    e.preventDefault();

    var card = {
      number: $('#cardnumber').val(),
      expiry_date: $('#expiry-date').val(),
      service_code: $('#service-code').val(),
      pvki: $('#pvk-index').val(),
      pvv: $('#pvv').val(),
      cvv: $('#cvv').val(),
      discretionary_data: $('#discr-data').val(),
    }

    ipc.send('ui-add-new-card', card);
    window.close()
  });
</script>